<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TradeBotPro - Purchase Successful!</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0d1117; /* Dark background */
            color: #e6edf3; /* Light text */
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        .gradient-bg {
            background: linear-gradient(135deg, #1a202c, #2d3748);
        }
        .btn-primary {
            background-image: linear-gradient(to right, #10B981, #059669); /* Green gradient */
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 15px rgba(16, 185, 129, 0.4);
        }
    </style>
</head>
<body class="antialiased">

    <!-- Header -->
    <header class="bg-gray-900 shadow-lg py-4 px-6 flex justify-between items-center fixed w-full z-50">
        <div class="flex items-center space-x-3">
            <svg class="w-8 h-8 text-green-400" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l3 3a1 1 0 001.414-1.414L11 9.586V6z" clip-rule="evenodd"></path>
            </svg>
            <h1 class="text-3xl font-bold text-white">TradeBotPro</h1>
        </div>
        <nav>
            <a href="index.html" class="text-gray-300 hover:text-white px-4 py-2 rounded-md">Home</a>
            <a href="feature_breakdown.html" class="text-gray-300 hover:text-white px-4 py-2 rounded-md">Feature Breakdown</a>
            <a href="index.html#pricing" class="text-gray-300 hover:text-white px-4 py-2 rounded-md">Pricing</a>
            <a href="help.html" class="text-gray-300 hover:text-white px-4 py-2 rounded-md">Help</a>
        </nav>
    </header>

    <!-- Success Content Section -->
    <main class="flex-grow flex items-center justify-center text-center py-20 px-6 gradient-bg">
        <div class="bg-gray-800 p-10 rounded-lg shadow-2xl max-w-2xl w-full">
            <svg class="w-24 h-24 text-green-500 mx-auto mb-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
            </svg>
            <h2 class="text-4xl font-bold text-white mb-4">Purchase Successful!</h2>
            <p class="text-xl text-gray-300 mb-6">
                Thank you for your purchase of the <span id="productType" class="font-semibold text-green-400"></span>!
            </p>
            <p class="text-lg text-gray-300 mb-4">
                Your download should begin automatically. Your download link and (for Pro Version) your unique license key have also been sent to your email address.
            </p>
            <div id="licenseKeyDisplay" class="bg-gray-700 p-4 rounded-md mb-6 hidden">
                <p class="text-sm text-gray-400 mb-2">For your convenience, here is your license key:</p>
                <code id="licenseKey" class="text-green-300 text-lg font-mono break-all"></code>
                <button onclick="copyLicenseKey()" class="btn-primary text-sm font-semibold py-2 px-4 rounded-md mt-3">
                    Copy License Key
                </button>
            </div>
            <p class="text-lg text-gray-300 mb-8">
                Please check your inbox (and spam folder) for the email.
            </p>
            <a href="help.html" class="btn-primary text-lg font-semibold py-3 px-8 rounded-lg shadow-lg inline-block">
                Go to Help Guide
            </a>
            <a href="index.html" class="btn-primary text-lg font-semibold py-3 px-8 rounded-lg shadow-lg inline-block ml-4">
                Return to Home
            </a>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 py-8 text-center text-gray-500 text-sm mt-auto">
        <p>&copy; 2025 TradeBotPro. All rights reserved. Trading involves substantial risk.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const productTypeSpan = document.getElementById('productType');
            const licenseKeyDisplay = document.getElementById('licenseKeyDisplay');
            const licenseKeyElement = document.getElementById('licenseKey');

            const productType = sessionStorage.getItem('tradebotpro_product_type');
            const licenseKey = sessionStorage.getItem('tradebotpro_license_key');
            const downloadUrl = sessionStorage.getItem('tradebotpro_download_url');

            if (productType) {
                productTypeSpan.textContent = productType === 'full' ? 'TradeBotPro Pro Version' : 'TradeBotPro Lite Version';
            } else {
                productTypeSpan.textContent = 'TradeBotPro Bot'; // Fallback
            }

            if (productType === 'full' && licenseKey) {
                licenseKeyElement.textContent = licenseKey;
                licenseKeyDisplay.classList.remove('hidden');
            }

            // Trigger immediate download
            if (downloadUrl) {
                const a = document.createElement('a');
                a.href = downloadUrl;
                // Set the download filename based on product type
                a.download = productType === 'full' ? 'TradeBotPro_Pro.zip' : 'TradeBotPro_Lite.zip';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                console.log('Download initiated via signed URL.');
            }

            // Clear session storage items after use to prevent re-downloads/re-display on refresh
            sessionStorage.removeItem('tradebotpro_product_type');
            sessionStorage.removeItem('tradebotpro_license_key');
            sessionStorage.removeItem('tradebotpro_download_url');
        });

        function copyLicenseKey() {
            const licenseKeyElement = document.getElementById('licenseKey');
            const textToCopy = licenseKeyElement.textContent;
            
            const textArea = document.createElement("textarea");
            textArea.value = textToCopy;
            document.body.appendChild(textArea);
            textArea.select();
            try {
                document.execCommand('copy');
                // Using a simple alert for now, but consider a custom modal for better UX
                alert('License key copied to clipboard!');
            } catch (err) {
                console.error('Failed to copy text: ', err);
                alert('Failed to copy license key. Please copy it manually.');
            }
            document.body.removeChild(textArea);
        }
    </script>
</body>
</html>
